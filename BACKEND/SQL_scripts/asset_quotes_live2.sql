DROP TABLE IF EXISTS asset_quotes_live;
-- Create the table
CREATE TABLE asset_quotes_live (
  id BIGSERIAL PRIMARY KEY,
  symbol VARCHAR(16) NOT NULL,
  open_price DECIMAL(12,4) NOT NULL,
  high_price DECIMAL(12,4) NOT NULL,
  low_price DECIMAL(12,4) NOT NULL,
  current_price DECIMAL(12,4) NOT NULL,
  volume BIGINT NOT NULL,
  latest_trading_day DATE NOT NULL,
  previous_close DECIMAL(12,4) NOT NULL,
  change_amount DECIMAL(12,4) NOT NULL,
  change_percent VARCHAR(16) NOT NULL,
  last_updated TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  UNIQUE (symbol)
);
CREATE INDEX idx_symbol_updated ON asset_quotes_live (symbol, last_updated);
CREATE INDEX idx_trading_day ON asset_quotes_live (latest_trading_day);

INSERT INTO asset_quotes_live VALUES 
(1,'HON',225.6900,226.0000,221.2400,221.7200,3764531,'2025-07-29',225.0800,-3.3600,'-1.4928%','2025-07-30 02:44:20','2025-07-30 02:19:58'),
(2,'AAPL',214.1750,214.8100,210.8200,211.2700,51411723,'2025-07-29',214.0500,-2.7800,'-1.2988%','2025-07-30 02:44:01','2025-07-30 02:33:23'),
(3,'MSFT',515.5300,517.6200,511.5600,512.5700,16469235,'2025-07-29',512.5000,0.0700,'0.0137%','2025-07-30 02:44:18','2025-07-30 02:33:38'),
(4,'GOOGL',192.4300,195.9200,192.0800,195.7500,41389153,'2025-07-29',192.5800,3.1700,'1.6461%','2025-07-30 02:44:36','2025-07-30 02:33:56'),
(5,'AMZN',234.1500,234.7200,230.3100,231.0100,33716220,'2025-07-29',232.7900,-1.7800,'-0.7646%','2025-07-30 02:44:51','2025-07-30 02:34:13'),
(6,'NVDA',177.9600,179.3800,175.0200,175.5100,154077512,'2025-07-29',176.7500,-1.2400,'-0.7016%','2025-07-30 02:45:07','2025-07-30 02:34:30'),
(7,'TSLA',325.5500,326.2500,318.2500,321.2000,87358861,'2025-07-29',325.5900,-4.3900,'-1.3483%','2025-07-30 02:40:28','2025-07-30 02:34:47'),
(8,'META',720.0000,724.4700,699.9100,700.0000,13267032,'2025-07-29',717.6300,-17.6300,'-2.4567%','2025-07-30 02:40:44','2025-07-30 02:35:05'),
(9,'NFLX',1179.0000,1179.6000,1163.2900,1168.7400,2752489,'2025-07-29',1174.6000,-5.8600,'-0.4989%','2025-07-30 02:41:00','2025-07-30 02:35:23'),
(10,'AMD',175.2050,182.3100,174.6800,177.4400,108154838,'2025-07-29',173.6600,3.7800,'2.1767%','2025-07-30 02:41:16','2025-07-30 02:35:39'),
(11,'CRM',271.5950,274.0000,267.3055,267.3900,5137094,'2025-07-29',270.2500,-2.8600,'-1.0583%','2025-07-30 02:41:32','2025-07-30 02:35:56'),
(12,'ADBE',370.4500,376.1600,369.7101,370.7000,4234200,'2025-07-29',369.4700,1.2300,'0.3329%','2025-07-30 02:41:48','2025-07-30 02:36:14'),
(14,'PYPL',71.7300,73.2800,70.3100,71.4500,42890667,'2025-07-29',78.2200,-6.7700,'-8.6551%','2025-07-30 02:42:04','2025-07-30 02:39:08'),
(16,'INTC',20.6900,20.8450,20.3400,20.4100,100831524,'2025-07-29',20.6800,-0.2700,'-1.3056%','2025-07-30 02:42:21','2025-07-30 02:39:24'),
(18,'CSCO',68.2300,68.7250,67.8250,67.9600,15261761,'2025-07-29',67.9200,0.0400,'0.0589%','2025-07-30 02:42:37','2025-07-30 02:39:41'),
(20,'PEP',141.5700,143.9850,141.1250,143.8900,6282944,'2025-07-29',141.5700,2.3200,'1.6388%','2025-07-30 02:42:57','2025-07-30 02:39:57'),
(22,'COST',933.9900,941.7850,927.3800,934.5700,2065880,'2025-07-29',933.9900,0.5800,'0.0621%','2025-07-30 02:43:13','2025-07-30 02:40:13'),
(24,'AVGO',297.5000,302.1900,294.8700,297.4200,19210780,'2025-07-29',294.3000,3.1200,'1.0601%','2025-07-30 02:43:29','2025-07-30 02:40:29'),
(26,'TXN',189.7050,192.8850,188.9000,191.3800,7144735,'2025-07-29',189.2500,2.1300,'1.1255%','2025-07-30 02:43:47','2025-07-30 02:40:45'),
(28,'QCOM',162.0350,163.6000,161.1400,162.0800,9460889,'2025-07-29',161.0500,1.0300,'0.6396%','2025-07-30 02:44:03','2025-07-30 02:41:01');

